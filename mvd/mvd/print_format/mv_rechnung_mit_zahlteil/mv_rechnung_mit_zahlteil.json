{
 "align_labels_right": 0,
 "creation": "2021-12-06 08:31:40.427614",
 "css": "#datumszeile {\n    margin-top: 75px;\n    margin-bottom: 12px;\n}\n\n#anschrift {\n    padding-top: 50px !important;\n    min-height: 130px;\n    line-height: 1.2em;\n}\n\n/*@font-face {\n    font-family: daxline;\n    src: url('/assets/mietrechtspraxis/fonts/daxline_w01_regular/bbfcf1aa-d115-47af-9a17-20cd6809531d.woff');\n}\n\n@font-face {\n    font-family: daxlineBold;\n    src: url('/assets/mietrechtspraxis/fonts/daxline_w01_bold/fe2da1f8-8be5-44dd-ac81-edc4fc5564d6.woff');\n}*/\n\n.print-format {\n  /*font-family: daxline;*/\n  font-size: 10pt;\n  line-height: 13.5pt;\n}\n\n/*.print-format b {\n  font-family: daxlineBold;\n}*/\n\n.print-format {\n margin-left: 0mm;\n margin-top: 42mm;\n margin-bottom: 0mm;\n margin-right: 0mm;\n}\n\n#allinone {\n    margin-left: 25mm;\n    margin-right: 19.5mm;\n}\n",
 "custom_format": 1,
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "<div id=\"allinone\">\n    <!-- load customer -->\n    {% set customer = frappe.get_doc(\"Customer\", doc.customer) %}\n    <!-- load contact -->\n    {% set contact = frappe.get_doc(\"Contact\", doc.contact_person) %}\n    <!-- load address -->\n    {% set address = frappe.get_doc(\"Address\", doc.customer_address) %}\n    <div id=\"anschrift\">\n        {% if customer.customer_type == 'Company' %}\n            {{ customer.customer_name }}<br>\n            {% if customer.customer_addition %}\n                {{ customer.customer_addition }}<br>\n            {% endif %}\n            {% if customer.customer_name | replace(\" \", \"\") != contact.first_name | replace(\" \", \"\") + contact.last_name | replace(\" \", \"\") %}\n                {{ contact.first_name }} {{ contact.last_name }}<br>\n            {% endif %}\n        {% else %}\n            {{ contact.first_name }} {{ contact.last_name }}<br>\n        {% endif %}\n        {% if address.address_line2 %}\n            {{ address.address_line2 }}<br>\n        {% endif %}\n        {{ address.address_line1 }}{% if address.postfach %} {{ address.postfach_nummer }}{% endif %}<br>\n        {{ address.pincode }} {{ address.city }}\n    </div>\n    <div id=\"datumszeile\">{{ _(\"Z\u00fcrich\") }}, {{ frappe.utils.get_datetime(doc.posting_date).strftime('%d. ') }}{{ _(frappe.utils.get_datetime(doc.posting_date).strftime('%B'), \"de\") }}&nbsp{{ frappe.utils.get_datetime(doc.posting_date).strftime('%Y') }}</div>\n    <div id=\"inhalt\">\n        <p><b>{{ _(\"Rechnung\") }}&nbsp{{ doc.name }}</b></p>\n        <table style=\"Width: 100%;\">\n            <tr style=\"border-bottom: 1px solid silver;\">\n                <td style=\"padding-bottom: 0px !important; width: 5%;\">{{ _(\"Anzahl\") }}</td>\n                <td style=\"padding-bottom: 0px !important; width: 45%;\">{{ _(\"Artikel\") }}</td>\n                <td style=\"padding-bottom: 0px !important; width: 25%; text-align: right;\">{{ _(\"Einzelpreis\") }}</td>\n                <td style=\"padding-bottom: 0px !important; width: 15%; text-align: right;\">{{ _(\"Betrag\") }}</td>\n                <td style=\"padding-bottom: 0px !important; width: 10%; text-align: right;\">{{ _(\"MWST\") }}</td>\n            </tr>\n            {% set mwst = {'7.7': {'betrag': 0, 'steuer': 0}, '2.5': {'betrag': 0, 'steuer': 0}} %}\n            {% for item in doc.items %}\n                <tr style=\"border-bottom: 1px solid silver;\">\n                    <td style=\"padding-bottom: 0px !important;\">{{ item.qty|int }}</td>\n                    <td style=\"padding-bottom: 0px !important;\">{{ item.item_name }}</td>\n                    <td style=\"padding-bottom: 0px !important; text-align: right;\">Fr. {{ \"{:,.2f}\".format(item.rate).replace(\",\", \"'\") }}</td>\n                    <td style=\"padding-bottom: 0px !important; text-align: right;\">Fr. {{ \"{:,.2f}\".format(item.amount).replace(\",\", \"'\") }}</td>\n                    <td style=\"padding-bottom: 0px !important; text-align: right;\">{{ item.item_tax_template }}</td>\n                </tr>\n                {% if item.item_tax_template %}\n                    {% if item.item_tax_template == '7.7%' %}\n                        {% if mwst.update({'7.7': {'betrag': mwst['7.7']['betrag'] + item.amount, 'steuer': mwst['7.7']['steuer'] + (item.amount - item.net_amount)}}) %}{% endif %}\n                        {% if mwst.update({'7.7': {'betrag': mwst['7.7']['betrag'], 'steuer': mwst['7.7']['steuer']|round(2)}}) %}{% endif %}\n                    {% endif %}\n                    {% if item.item_tax_template == '2.5%' %}\n                        {% if mwst.update({'2.5': {'betrag': mwst['2.5']['betrag'] + item.amount, 'steuer': mwst['2.5']['steuer'] + (item.amount - item.net_amount)}}) %}{% endif %}\n                        {% if mwst.update({'2.5': {'betrag': mwst['2.5']['betrag'], 'steuer': mwst['2.5']['steuer']|round(2)}}) %}{% endif %}\n                    {% endif %}\n                {% endif %}\n            {% endfor %}\n            <tr style=\"border-bottom: 1px solid silver;\">\n                <td style=\"padding-bottom: 0px !important;\"></td>\n                <td style=\"padding-bottom: 0px !important;\"></td>\n                <td style=\"padding-bottom: 0px !important; text-align: right;\">{{ _(\"Gesamtbetrag\") }}</td>\n                <td style=\"padding-bottom: 0px !important; text-align: right;\">Fr. {{ \"{:,.2f}\".format(doc.outstanding_amount).replace(\",\", \"'\") }}</td>\n                <td style=\"padding-bottom: 0px !important;\"></td>\n            </tr>\n            <tr>\n                <td colspan=\"3\" style=\"font-size: 8pt;\">{{ _(\"UID: CHE-100.822.971 MWST\") }}<br>{{ _(\"Zahlbar 30 Tage netto\") }}</td>\n                <td colspan=\"2\" style=\"font-size: 8pt;\">\n                    {% if address.country == 'Schweiz' %}\n                        <table style=\"width: 100%;\">\n                            {% if mwst['7.7']['betrag'] %}\n                                <tr>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important;\">{{ _(\"Satz\") }}:</td>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important;\">7.7%</td>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important;\">{{ _(\"Betrag\") }}:</td>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important; text-align: right;\">{{ \"{:,.2f}\".format(mwst['7.7']['betrag']).replace(\",\", \"'\") }}</td>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important;\">{{ _(\"Steuer\") }}:</td>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important; text-align: right;\">{{ \"{:,.2f}\".format(mwst['7.7']['steuer']).replace(\",\", \"'\") }}</td>\n                                </tr>\n                            {% endif %}\n                            {% if mwst['2.5']['betrag'] %}\n                                <tr>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important;\">{{ _(\"Satz\") }}:</td>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important;\">2.5%</td>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important;\">{{ _(\"Betrag\") }}:</td>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important; text-align: right;\">{{ \"{:,.2f}\".format(mwst['2.5']['betrag']).replace(\",\", \"'\") }}</td>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important;\">{{ _(\"Steuer\") }}:</td>\n                                    <td style=\"padding-bottom: 0px !important; padding-top: 0px !important; text-align: right;\">{{ \"{:,.2f}\".format(mwst['2.5']['steuer']).replace(\",\", \"'\") }}</td>\n                                </tr>\n                            {% endif %}\n                        </table>\n                    {% endif %}\n                </td>\n            </tr>\n        </table>\n        <p style=\"margin: 12px 0px 12px;\">{{ doc.terms or '' }}</p>\n        <p style=\"margin: 12px 0px 12px;\">{{ _(\"Mit bestem Dank und freundlichen Gr\u00fcssen\") }}<br>mietrechtspraxis | mp</p>\n    </div>\n</div>\n\n<!-- QRR Section -->\n\n<!-- payer details -->\n{% if doc.customer_address %}\n    {% set pay_addr = frappe.get_doc(\"Address\", doc.customer_address) %}\n    {% if pay_addr %}\n        <!-- get values -->\n        {% if pay_addr.postfach %}\n            <!-- postfach -->\n            {% set pay_country = frappe.get_doc(\"Country\", pay_addr.country) %}\n            {% set pay_country_code = pay_country.code | upper %}\n            {% if pay_addr.postfach_nummer %}\n                {% set postfach_nummer = pay_addr.postfach_nummer %}\n            {% else %}\n                {% set postfach_nummer = ' ' %}\n            {% endif %}\n            {% set pay_address_line_detail = {'name': doc.customer, 'street': 'Postfach', 'number': postfach_nummer, 'pin': pay_addr.pincode, 'city': pay_addr.city, 'country': pay_country_code } %}\n        {% else %}\n            <!-- street -->\n            {% set pay_address_trimed = pay_addr.address_line1 | trim %}\n            {% set pay_address_array = pay_address_trimed.split(\" \") %}\n            {% set pay_address_line_item_count = pay_address_array | count %}\n            {% set pay_country = frappe.get_doc(\"Country\", pay_addr.country) %}\n            {% set pay_country_code = pay_country.code | upper %}\n            {% set pay_address_line_detail = {'name': doc.customer, 'street': '', 'number': '', 'pin': pay_addr.pincode, 'city': pay_addr.city, 'country': pay_country_code } %}\n            {% for i in range(0, (pay_address_line_item_count - 1)) %}\n                {% if pay_address_line_detail.update({'street': pay_address_line_detail.street + \" \" + pay_address_array[i] }) %}{% endif %}\n            {% endfor %}\n            {% if pay_address_line_detail.update({'number': pay_address_array[pay_address_line_item_count - 1]}) %}{% endif %}\n        {% endif %}\n        \n        <!-- set values -->\n        {% set payer_name = doc.customer_name %}\n        {% set payer_street = pay_address_line_detail.street %}\n        {% set payer_number = pay_address_line_detail.number %}\n        {% set payer_pincode = pay_address_line_detail.pin %}\n        {% set payer_town = pay_address_line_detail.city %}\n        {% set payer_country = pay_address_line_detail.country %}\n        \n        <!-- check street vs number -->\n        {% if not payer_street %}\n            {% if payer_number %}\n                {% set payer_street = payer_number %}\n                {% set payer_number = ' ' %}\n            {% endif %}\n        {% endif %}\n    {% endif %}\n{% else %}\n    {% set payer_name = False %}\n    {% set payer_street = False %}\n    {% set payer_number = False %}\n    {% set payer_pincode = False %}\n    {% set payer_town = False %}\n    {% set payer_country = False %}\n{% endif %}\n\n<!-- receiver details -->\n{% if doc.company_address %}\n    {% set cmp_addr = frappe.get_doc(\"Address\", doc.company_address) %}\n    {% if cmp_addr %}\n        <!-- get values -->\n        {% set address_array = cmp_addr.address_line1.split(\" \") %}\n        {% set address_line_item_count = address_array | count %}\n        {% set cmp_country = frappe.get_doc(\"Country\", cmp_addr.country) %}\n        {% set cmp_country_code = cmp_country.code | upper %}\n        {% set cmp_address_line_detail = {'name': doc.company, 'street': '', 'number': '', 'plz': cmp_addr.plz, 'city': cmp_addr.city, 'country': cmp_country_code } %}\n        {% for i in range(0, (address_line_item_count - 1)) %}\n            {% if cmp_address_line_detail.update({'street': cmp_address_line_detail.street + \" \" + address_array[i] }) %}{% endif %}\n        {% endfor %}\n        {% if cmp_address_line_detail.update({'number': address_array[address_line_item_count - 1]}) %}{% endif %}\n        \n        <!-- set values -->\n        {% set receiver_name = cmp_address_line_detail.name | replace(\"|\", \"I\") %}\n        {% set receiver_street = cmp_address_line_detail.street %}\n        {% set receiver_number = cmp_address_line_detail.number %}\n        {% set receiver_pincode = cmp_address_line_detail.plz %}\n        {% set receiver_town = cmp_address_line_detail.city %}\n        {% set receiver_country = cmp_address_line_detail.country %}\n    {% endif %}\n{% else %}\n    {% set receiver_name = False %}\n    {% set receiver_street = False %}\n    {% set receiver_number = False %}\n    {% set receiver_pincode = False %}\n    {% set receiver_town = False %}\n    {% set receiver_country = False %}\n{% endif %}\n\n<!-- qrr dict -->\n{% set qrr = {\n    'top_position': '565px',\n    'iban': 'CH68 3000 0002 8878 4152 8',\n    'reference': doc.esr_reference,\n    'reference_type': 'QRR',\n    'currency': doc.currency,\n    'amount': \"{:,.2f}\".format(doc.outstanding_amount).replace(\",\", \"'\"),\n    'message': doc.name,\n    'additional_information': ' ',\n    'receiver_name': receiver_name,\n    'receiver_street': receiver_street,\n    'receiver_number': receiver_number,\n    'receiver_country': receiver_country,\n    'receiver_pincode': receiver_pincode,\n    'receiver_town': receiver_town,\n    'payer_name': payer_name,\n    'payer_street': payer_street,\n    'payer_number': payer_number,\n    'payer_country': payer_country,\n    'payer_pincode': payer_pincode,\n    'payer_town': payer_town\n} %}\n{% if doc.outstanding_amount > 0 %}\n    {{ frappe.render_template('templates/qrr_invoice/qrr_invoice.html', {'qrr': qrr}) }}\n{% endif %}",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2021-12-06 08:34:46.379102",
 "modified_by": "Administrator",
 "module": "MVD",
 "name": "MV-Rechnung mit Zahlteil",
 "owner": "Administrator",
 "print_format_builder": 1,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}