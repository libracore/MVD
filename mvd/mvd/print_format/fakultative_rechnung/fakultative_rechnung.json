{
 "align_labels_right": 0,
 "creation": "2022-01-14 09:55:53.421512",
 "css": ".print-format {\n margin-left: 0mm;\n margin-top: 0mm;\n margin-bottom: 0mm;\n margin-right: 0mm;\n}\n\n@font-face {\n    font-family: 'MetaOT';\n    font-style: normal;\n    font-weight: normal;\n    src: url('/assets/mvd/font/MetaOT-Normal.woff');\n}\n\n#logo_kopfzeile {\n    width: 40mm;\n    margin-left: 15mm;\n    padding-top: 14.5mm !important;\n}\n\n#anschrift {\n    max-width: 80mm;\n    width: 80mm;\n    margin-top: 26mm;\n    margin-left: 30mm;\n    float: left;\n    font-size: 10pt;\n    line-height: 13pt;\n    font-family: 'MetaOT';\n}\n\n#ansprechperson_1 {\n    float: left;\n    margin-top: 26mm;\n    margin-left: 10mm;\n    width: 25mm;\n    max-width: 25mm;\n    font-size: 8pt;\n    line-height: 10pt;\n    color: gray;\n    font-family: 'MetaOT';\n}\n\n#ansprechperson_2 {\n    float: left;\n    margin-top: 26mm;\n    margin-left: 5mm;\n    font-size: 8pt;\n    line-height: 10pt;\n    font-family: 'MetaOT';\n}\n\n#inhalt {\n    clear: left;\n    margin-top: 69.25mm;\n    margin-left: 30mm;\n    height: 77.75mm;\n    max-height: 77.75mm;\n    font-size: 10pt;\n    line-height: 13pt;\n    width: 174mm;\n    max-width: 174mm;\n    font-family: 'MetaOT';\n}\n#fusszeile_1 {\n    margin-left: 30mm;\n    height: 17mm;\n    max-height: 17mm;\n    float: left;\n    width: 61mm;\n    max-width: 61mm;\n    font-size: 8pt;\n    line-height: 10pt;\n    color: #0063ae;\n    font-weight: bold;\n    font-family: 'MetaOT';\n}\n\n#fusszeile_2 {\n    height: 17mm;\n    max-height: 17mm;\n    float: left;\n    width: 41mm;\n    max-width: 41mm;\n    font-size: 8pt;\n    line-height: 10pt;\n    color: #0063ae;\n    font-family: 'MetaOT';\n}\n#fusszeile_3 {\n    height: 17mm;\n    max-height: 17mm;\n    float: left;\n    font-size: 8pt;\n    line-height: 10pt;\n    color: #0063ae;\n    font-family: 'MetaOT';\n}\n\n#seite_2 {\n    margin-left: 30mm;\n    padding-top: 52.5mm;\n    width: 174mm;\n    max-width: 174mm;\n    font-family: 'MetaOT';\n}\n\n#platzhalter_hv {\n    margin-top: 26mm;\n    margin-left: 30mm;\n    height: 138.5mm;\n    max-height: 138.5mm;\n    padding-bottom: 18mm;\n}",
 "custom_format": 1,
 "disable_smart_shrinking": 1,
 "disabled": 0,
 "doc_type": "Fakultative Rechnung",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "<!-- load mitgliedschaft -->\n{% set mitgliedschaft = frappe.get_doc(\"MV Mitgliedschaft\", doc.mv_mitgliedschaft) %}\n{% set sektion = frappe.get_doc(\"Sektion\", mitgliedschaft.sektion_id) %}\n<!-- load customer, contact, address -->\n{% if mitgliedschaft.abweichende_rechnungsadresse %}\n    {% if mitgliedschaft.unabhaengiger_debitor %}\n        {% set customer = frappe.get_doc(\"Customer\", mitgliedschaft.rg_kunde) %}\n        {% set contact = frappe.get_doc(\"Contact\", mitgliedschaft.rg_kontakt) %}\n        {% set address = frappe.get_doc(\"Address\", mitgliedschaft.rg_adresse) %}\n        {% set customer_name = contact.first_name + \" \" + contact.last_name %}\n    {% else %}\n        {% set customer = frappe.get_doc(\"Customer\", mitgliedschaft.kunde_mitglied) %}\n        {% set contact = frappe.get_doc(\"Contact\", mitgliedschaft.kontakt_mitglied) %}\n        {% set address = frappe.get_doc(\"Address\", mitgliedschaft.rg_adresse) %}\n        {% set customer_name = contact.first_name + \" \" + contact.last_name %}\n    {% endif %}\n{% else %}\n    {% set customer = frappe.get_doc(\"Customer\", mitgliedschaft.kunde_mitglied) %}\n    {% set contact = frappe.get_doc(\"Contact\", mitgliedschaft.kontakt_mitglied) %}\n    {% set address = frappe.get_doc(\"Address\", mitgliedschaft.adresse_mitglied) %}\n    {% set customer_name = contact.first_name + \" \" + contact.last_name %}\n{% endif %}\n{% set textkonserven = frappe.get_all('Textkonserven', filters={'sektion_id': sektion.name, 'rechnungstyp': 'Spende'}, fields=['textkonserve', 'rueckseite', 'textkonserve_rueckseite', 'fusszeile_ausblenden']) %}\n{% if textkonserven|length > 0 %}\n    {% set textkonserve = textkonserven[0] %}\n{% else %}\n    {% set textkonserve = {'textkonserve': '<h1>Keine Textkonserve gefunden!</h1>'} %}\n{% endif %}\n<div id=\"logo_kopfzeile\"><img src=\"assets/mvd/img/MV_Logo_F.png\"></div>\n<div id=\"anschrift\">\n    {{ mitgliedschaft.adressblock|replace(\"\\n\", \"<br>\") }}\n</div>\n<div id=\"ansprechperson_1\">\n    Ansprechperson<br>\n    E-Mail<br>\n    Direktwahl\n</div>\n<div id=\"ansprechperson_2\">\n    Ihr Name<br>\n    Ihre E-Mail<br>\n    Ihre Direktwahl\n</div>\n<div id=\"inhalt\">\n    {% if sektion %}{{ sektion.default_ort }}, {{ frappe.utils.get_datetime(doc.posting_date).strftime('%d.%m.%Y') }}<br><br>{% endif %}\n    {{ textkonserve.textkonserve|replace(\"%%ANREDE%%\", mitgliedschaft.briefanrede) }}\n</div>\n{% if not textkonserve.fusszeile_ausblenden %}\n<div id=\"fusszeile_1\">\n    {{ sektion.fz_links }}\n</div>\n<div id=\"fusszeile_2\">\n    {{ sektion.fz_mitte }}\n</div>\n<div id=\"fusszeile_3\">\n    {{ sektion.fz_rechts }}\n</div>\n{% else %}\n<div id=\"fusszeile_1\">\n    &nbsp;\n</div>\n<div id=\"fusszeile_2\">\n    &nbsp;\n</div>\n<div id=\"fusszeile_3\">\n    &nbsp;\n</div>\n{% endif %}\n\n<!-- QRR Section -->\n\n<!-- payer details -->\n{% if address %}\n    {% set pay_addr = address %}\n    {% if pay_addr %}\n        <!-- get values -->\n        {% if pay_addr.postfach %}\n            <!-- postfach -->\n            {% set pay_country = frappe.get_doc(\"Country\", pay_addr.country) %}\n            {% set pay_country_code = pay_country.code | upper %}\n            {% if pay_addr.postfach_nummer %}\n                {% set postfach_nummer = pay_addr.postfach_nummer %}\n            {% else %}\n                {% set postfach_nummer = ' ' %}\n            {% endif %}\n            {% set pay_address_line_detail = {'name': doc.customer, 'street': 'Postfach', 'number': postfach_nummer, 'pin': pay_addr.pincode, 'city': pay_addr.city, 'country': pay_country_code } %}\n        {% else %}\n            <!-- street -->\n            {% set pay_address_trimed = pay_addr.strasse | trim %}\n            {% set pay_address_array = pay_address_trimed.split(\" \") %}\n            {% set pay_address_line_item_count = pay_address_array | count %}\n            {% set pay_country = frappe.get_doc(\"Country\", pay_addr.country) %}\n            {% set pay_country_code = pay_country.code | upper %}\n            {% set pay_address_line_detail = {'name': customer_name, 'street': '', 'number': '', 'pin': pay_addr.pincode, 'city': pay_addr.city, 'country': pay_country_code } %}\n            {% for i in range(0, (pay_address_line_item_count - 1)) %}\n                {% if pay_address_line_detail.update({'street': pay_address_line_detail.street + \" \" + pay_address_array[i] }) %}{% endif %}\n            {% endfor %}\n            {% if pay_address_line_detail.update({'number': pay_address_array[pay_address_line_item_count - 1]}) %}{% endif %}\n        {% endif %}\n        \n        <!-- set values -->\n        {% set payer_name = customer_name %}\n        {% set payer_street = pay_address_line_detail.street %}\n        {% set payer_number = pay_address_line_detail.number %}\n        {% set payer_pincode = pay_address_line_detail.pin %}\n        {% set payer_town = pay_address_line_detail.city %}\n        {% set payer_country = pay_address_line_detail.country %}\n        \n        <!-- check street vs number -->\n        {% if not payer_street %}\n            {% if payer_number %}\n                {% set payer_street = payer_number %}\n                {% set payer_number = ' ' %}\n            {% endif %}\n        {% endif %}\n    {% endif %}\n{% else %}\n    {% set payer_name = False %}\n    {% set payer_street = False %}\n    {% set payer_number = False %}\n    {% set payer_pincode = False %}\n    {% set payer_town = False %}\n    {% set payer_country = False %}\n{% endif %}\n\n<!-- receiver details -->\n{% set company_address = frappe.get_all('Dynamic Link', filters={'link_doctype': 'Company', 'link_name': sektion.company, 'parenttype': 'Address'}, fields=['parent']) %}\n{% if company_address|length > 0 %}\n    {% set cmp_addr = frappe.get_doc(\"Address\", company_address[0].parent) %}\n    {% if cmp_addr %}\n        <!-- get values -->\n        {% set address_array = cmp_addr.strasse.split(\" \") %}\n        {% set address_line_item_count = address_array | count %}\n        {% set cmp_country = frappe.get_doc(\"Country\", cmp_addr.country) %}\n        {% set cmp_country_code = cmp_country.code | upper %}\n        {% set cmp_address_line_detail = {'name': sektion.company, 'street': '', 'number': '', 'plz': cmp_addr.plz, 'city': cmp_addr.city, 'country': cmp_country_code } %}\n        {% for i in range(0, (address_line_item_count - 1)) %}\n            {% if cmp_address_line_detail.update({'street': cmp_address_line_detail.street + \" \" + address_array[i] }) %}{% endif %}\n        {% endfor %}\n        {% if cmp_address_line_detail.update({'number': address_array[address_line_item_count - 1]}) %}{% endif %}\n        \n        <!-- set values -->\n        {% set receiver_name = cmp_address_line_detail.name | replace(\"|\", \"I\") %}\n        {% set receiver_street = cmp_address_line_detail.street %}\n        {% set receiver_number = cmp_address_line_detail.number %}\n        {% set receiver_pincode = cmp_address_line_detail.plz %}\n        {% set receiver_town = cmp_address_line_detail.city %}\n        {% set receiver_country = cmp_address_line_detail.country %}\n    {% endif %}\n{% else %}\n    {% set receiver_name = False %}\n    {% set receiver_street = False %}\n    {% set receiver_number = False %}\n    {% set receiver_pincode = False %}\n    {% set receiver_town = False %}\n    {% set receiver_country = False %}\n{% endif %}\n\n<!-- qrr dict -->\n{% set qrr = {\n    'top_position': '191mm',\n    'iban': 'CH68 3000 0002 8878 4152 8',\n    'reference': doc.qrr_referenz,\n    'reference_type': 'QRR',\n    'currency': 'CHF',\n    'amount': \"{:,.2f}\".format(doc.betrag).replace(\",\", \"'\"),\n    'message': doc.name,\n    'additional_information': ' ',\n    'receiver_name': receiver_name,\n    'receiver_street': receiver_street,\n    'receiver_number': receiver_number,\n    'receiver_country': receiver_country,\n    'receiver_pincode': receiver_pincode,\n    'receiver_town': receiver_town,\n    'payer_name': payer_name,\n    'payer_street': payer_street,\n    'payer_number': payer_number,\n    'payer_country': payer_country,\n    'payer_pincode': payer_pincode,\n    'payer_town': payer_town\n} %}\n{% if doc.status == 'Unpaid' %}\n    {{ frappe.render_template('templates/includes/mvd_qrr_invoice.html', {'qrr': qrr}) }}\n{% endif %}",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2022-01-25 21:19:19.190137",
 "modified_by": "Administrator",
 "module": "MVD",
 "name": "Fakultative Rechnung",
 "owner": "Administrator",
 "print_format_builder": 1,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}